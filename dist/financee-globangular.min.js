var globalApp=angular.module("globalApp",["angular-loading-bar","ngAnimate","ui.bootstrap"]);globalApp.config(["cfpLoadingBarProvider",function(a){a.includeSpinner=!0}]),globalApp.directive("ngReallyClick",["$modal",function(a){var b=function(a,b){a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}};return{restrict:"A",scope:{ngReallyClick:"&",item:"="},link:function(c,d,e){d.bind("click",function(){var d=e.ngReallyMessage||"Are you sure ?",f='<div class="modal-body">'+d+"</div>";f+='<div class="modal-footer"><button class="btn btn-primary" ng-click="ok()">OK</button><button class="btn btn-warning" ng-click="cancel()">Cancel</button></div>';var g=a.open({template:f,controller:b});g.result.then(function(){c.ngReallyClick({item:c.item})},function(){})})}}}]),globalApp.filter("dateToISO",function(){return function(a){return null===a||"0000-00-00"===a||"0000-00-00 00:00:00"===a?"":a=new Date(a).toISOString()}}),globalApp.factory("$cache",[function(){var a={};return{get:function(b){return this.has(b)?a[b]:""},save:function(b,c){a[b]=c},drop:function(b){this.has(b)&&a.splice(b,1)},has:function(b){return"undefined"!=typeof a[b]}}}]),globalApp.factory("$global",["$http","cfpLoadingBar",function(a,b){var c={};return{request:function(d,e,f){"undefined"==typeof c[d]&&(c[d]=!1),c[d]!==!0&&(c[d]=!0,b.start(),angular.isDefined(f)?a.post(d,$.param(f),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){c[d]=!1,b.complete(),e(a)}).error(function(){c[d]=!1,b.complete();var a={erro:"Falha ao acessar serviço!",status:"0"};e(a)}):a.get(d).success(function(a){c[d]=!1,b.complete(),e(a)}).error(function(){c[d]=!1,b.complete();var a={erro:"Falha ao acessar serviço!",status:"0"};e(a)}))}}}]),globalApp.factory("$newtab",[function(){return{open:function(a,b,c,d){var e=document.createElement("form");if(e.action=a,e.method=c||"post",e.target=d||"_blank",b)for(var f in b){var g=document.createElement("textarea");g.name=f,g.value="object"==typeof b[f]?JSON.stringify(b[f]):b[f],e.appendChild(g)}e.style.display="none",document.body.appendChild(e),e.submit()}}}]),globalApp.provider("$api",function(){this.services={},this.cList=!1,this.getVariables="",this.registerServices=function(a){this.services=a},this.cacheList=function(a){this.cList=a},this.concatInUrl=function(a){this.getVariables=a},this.$get=["$cache","$global",function(a,b){function c(a){var b=window.location.protocol+"//"+window.location.host+"/";return"undefined"!=typeof a&&(b+=a),b}function d(a,b){return"undefined"==typeof this.services[a]?(console.log("Service "+a+" doesn't exists!"),!1):this.services[a].type===b?!0:(console.log("Method "+b+" is incorrect for service "+a+". Use method "+this.services[a].type+"."),!1)}function e(b,c,d){return"function"!=typeof c?!0:a.has(b+"/"+d)?(c(a.get(b+"/"+d)),!0):!1}function f(d,e,f){if(f="string"!=typeof f?"":"/"+f,!1!==this.serviceExists(d,"get")&&!0!==this.executeCallback(d,e,f)){var g="cache"===this.services[d].urltype?getUrlFiles(this.services[d].url):c(this.services[d].url)+f+this.getVariables;b.request(g,function(b){e(b),a.save(d+"/"+f,b)})}}function g(a,d,e){if(!1!==this.serviceExists(a,"set")&&"undefined"!=typeof d){var f=c(this.services[a].url)+this.getVariables;b.request(f,e,d)}}function h(d,e,f){if(!1!==this.serviceExists(d,"list")){var g=this;if(this.cList){var h=d+"_"+f;if(a.has(h))return void e(a.get(h))}var i=c(this.services[d].url);"string"==typeof f&&(i+="/"+f),i+=this.getVariables,b.request(i,function(b){e(b),g.hat_callback(b,!1),g.cList&&a.save(h,b)})}}function i(a,d,e){if("string"==typeof d&&!1!==this.serviceExists(a,"drop")){var f=c(this.services[a].url);f+="/"+d+this.getVariables,b.request(f,e)}}return{list:h,drop:i,save:g,get:f,executeCallback:e,serviceExists:d,services:this.services,cList:this.cList,getVariables:this.getVariables}}]});