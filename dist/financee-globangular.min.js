var globalApp=angular.module("globalApp",["angular-loading-bar","ngAnimate","ui.bootstrap"]);globalApp.config(["cfpLoadingBarProvider",function(a){a.includeSpinner=!0}]),globalApp.directive("navMenu",function(a){return function(b,c,d){var e,f,g,h,i,j=c.find("a"),k=d.navMenu||"on",l={};for(a.$$html5||(e=/^#[^/]*/),i=0;i<j.length;i++)f=angular.element(j[i]),g=f.attr("href"),a.$$html5?l[g]=f:l[g.replace(e,"")]=f;b.$on("$routeChangeStart",function(){var b=l[a.path()];b&&(h&&h.removeClass(k),h=b,h.addClass(k))})}}),globalApp.directive("ngReallyClick",["$modal",function(a){var b=function(a,b){a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}};return{restrict:"A",scope:{ngReallyClick:"&",item:"="},link:function(c,d,e){d.bind("click",function(){var d=e.ngReallyMessage||"Você realmente deseja prosseguir ?",f='<div class="modal-body">'+d+"</div>";f+='<div class="modal-footer"><button class="btn btn-primary" ng-click="ok()">OK</button><button class="btn btn-warning" ng-click="cancel()">Cancel</button></div>';var g=a.open({template:f,controller:b});g.result.then(function(){c.ngReallyClick({item:c.item})},function(){})})}}}]),globalApp.factory("$cache",[function(){var a={};return{get:function(b){return this.has(b)?a[b]:""},save:function(b,c){a[b]=c},drop:function(b){this.has(b)&&a.splice(b,1)},has:function(b){return"undefined"!=typeof a[b]}}}]),globalApp.factory("$global",["$http","cfpLoadingBar",function(a,b){var c={},d=function(a){var b={};return a&&"[object Function]"===b.toString.call(a)},e=function(a){c[a]=!1,b.complete()},f=function(a,b){var c="undefined"!=typeof b?b:"0",d={erro:"Falha ao acessar serviço!",status:c};return d};return{request:function(g,h,i){"undefined"==typeof c[g]&&(c[g]=!1),!1!==d(h)&&c[g]!==!0&&(c[g]=!0,b.start(),angular.isDefined(i)?a.post(g,$.param(i),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){e(g),h(a)}).error(function(a,b){e(g),h(f(a,b))}):a.get(g).success(function(a){e(g),h(a)}).error(function(a,b){e(g),h(f(a,b))}))}}}]),globalApp.factory("$newtab",[function(){return{open:function(a,b,c,d){var e=document.createElement("form");if(e.action=a,e.method=c||"post",e.target=d||"_blank",b)for(var f in b){var g=document.createElement("textarea");g.name=f,g.value="object"==typeof b[f]?JSON.stringify(b[f]):b[f],e.appendChild(g)}e.style.display="none",document.body.appendChild(e),e.submit()}}}]),globalApp.filter("dateToISO",function(){return function(a){return null===a||"0000-00-00"===a||"0000-00-00 00:00:00"===a?"":a=new Date(a).toISOString()}}),globalApp.provider("$api",function(){this.services={},this.cList=!1,this.getVariables="",this.registerServices=function(a){this.services=a},this.cacheList=function(a){this.cList=a},this.concatInUrl=function(a){this.getVariables=a},this.$get=["$cache","$global",function(a,b){function c(a){var b=window.location.protocol+"//"+window.location.host+"/";return"undefined"!=typeof a&&(b+=a),b}function d(a,b){return"undefined"!=typeof a.status?"1"===a.status||1===a.status?("undefined"!=typeof a.success?message_success(a.success,5e3):message_alert("Dados inseridos sem confirmação do servidor. Não é possível determinar se a operação foi concluída com sucesso!"),!0):("undefined"!=typeof a.erro?message_erro(a.erro,5e3):message_alert("Falha ao salvar dados no servidor. Não é possível determinar qual o tipo de falha que ocorreu!"),!1):b===!0?(message_erro("Falha ao receber resposta do servidor!"),!1):!0}function e(a,b){return"undefined"==typeof this.services[a]?(console.log("Service "+a+" doesn't exists!"),!1):this.services[a].type===b?!0:(console.log("Method "+b+" is incorrect for service "+a+". Use method "+this.services[a].type+"."),!1)}function f(b,c,d){return"function"!=typeof c?!0:a.has(b+"/"+d)?(c(a.get(b+"/"+d)),!0):!1}function g(d,e,f){if(f="string"!=typeof f?"":"/"+f,!1!==this.serviceExists(d,"get")&&!0!==this.executeCallback(d,e,f)){var g="cache"===this.services[d].urltype?getUrlFiles(this.services[d].url):c(this.services[d].url)+f+this.getVariables;b.request(g,function(b){e(b),a.save(d+"/"+f,b)})}}function h(a,d,e){if(!1!==this.serviceExists(a,"set")&&"undefined"!=typeof d){var f=c(this.services[a].url)+this.getVariables;b.request(f,e,d)}}function i(e,f,g){if(!1!==this.serviceExists(e,"list")){var h=this;if(this.cList){var i=e+"_"+g;if(a.has(i))return void f(a.get(i))}var j=c(this.services[e].url);"string"==typeof g&&(j+="/"+g),j+=this.getVariables,b.request(j,function(b){f(b),d(b,!1),h.cList&&a.save(i,b)})}}function j(a,d,e){if("string"==typeof d&&!1!==this.serviceExists(a,"drop")){var f=c(this.services[a].url);f+="/"+d+this.getVariables,b.request(f,e)}}return{list:i,drop:j,save:h,get:g,executeCallback:f,serviceExists:e,services:this.services,cList:this.cList,getVariables:this.getVariables}}]});